<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kevin Blackburn-Matzen - Computer Vision & AI Researcher</title>
  <meta name="description" content="Senior Research Scientist at Adobe specializing in controllable image and video generation, 3D vision, computational photography, and deep learning. PhD from Cornell University.">
  <meta name="keywords" content="Kevin Blackburn-Matzen, Kevin Matzen, computer vision, AI, machine learning, computational photography, 3D vision, depth estimation, Adobe Research, Cornell University">
  <meta name="author" content="Kevin Blackburn-Matzen">
  
  <!-- Open Graph / Facebook / LinkedIn -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://kmatzen.com/">
  <meta property="og:title" content="Kevin Blackburn-Matzen - Computer Vision & AI Researcher">
  <meta property="og:description" content="Senior Research Scientist at Adobe specializing in controllable image and video generation, 3D vision, and computational photography. ECCV Best Paper Award winner.">
  <meta property="og:image" content="https://kmatzen.com/images/daytime.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://kmatzen.com/">
  <meta name="twitter:title" content="Kevin Blackburn-Matzen - Computer Vision & AI Researcher">
  <meta name="twitter:description" content="Senior Research Scientist at Adobe specializing in controllable image and video generation, 3D vision, and computational photography.">
  <meta name="twitter:image" content="https://kmatzen.com/images/daytime.jpg">
  
  <!-- Additional Meta Tags -->
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  <link rel="canonical" href="https://kmatzen.com/">
  
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé®</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Kevin Blackburn-Matzen",
    "alternateName": "Kevin Matzen",
    "url": "https://kmatzen.com",
    "image": "https://kmatzen.com/images/daytime.jpg",
    "jobTitle": "Senior Research Scientist/Engineer",
    "worksFor": {
      "@type": "Organization",
      "name": "Adobe"
    },
    "alumniOf": [
      {
        "@type": "EducationalOrganization",
        "name": "Cornell University",
        "department": "Computer Science"
      },
      {
        "@type": "EducationalOrganization",
        "name": "University of Michigan",
        "department": "Computer Science Engineering"
      }
    ],
    "award": "ECCV Best Paper Award",
    "knowsAbout": [
      "Computer Vision",
      "Machine Learning",
      "Computational Photography",
      "3D Vision",
      "Depth Estimation",
      "Artificial Intelligence",
      "Video Processing",
      "Image Generation"
    ],
    "sameAs": [
      "https://scholar.google.com/citations?user=EmzqgcMAAAAJ&hl=en",
      "https://github.com/kmatzen",
      "https://www.linkedin.com/in/kevin-blackburn-matzen-b3714414"
    ]
  }
  </script>
  
  <!-- Prevent flash of unstyled content by setting theme early -->
  <script>
    (function() {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = savedTheme || (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
  
  <style>
    /* Minimal grid system */
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
    }

    img {
      max-width: 100%;
      height: auto;
    }

    button {
      cursor: pointer;
      font-family: inherit;
    }

    /* Container and grid */
    .container {
      max-width: 100%;
      padding-right: 15px;
      padding-left: 15px;
      margin-right: auto;
      margin-left: auto;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 750px;
      }
    }

    @media (min-width: 992px) {
      .container {
        max-width: 970px;
      }
    }

    @media (min-width: 1200px) {
      .container {
        max-width: 1170px;
      }
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      margin-right: -15px;
      margin-left: -15px;
    }

    .col-md-4,
    .col-md-8,
    .col-md-12 {
      position: relative;
      width: 100%;
      padding-right: 15px;
      padding-left: 15px;
    }

    @media (min-width: 768px) {
      .col-md-4 {
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
      }

      .col-md-8 {
        flex: 0 0 66.666667%;
        max-width: 66.666667%;
      }

      .col-md-12 {
        flex: 0 0 100%;
        max-width: 100%;
      }
    }

    .navbar {
      position: relative;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 1rem;
    }

    .navbar-header {
      display: flex;
      align-items: center;
    }

    .custom-nav {
      margin: 0;
      padding: 18px 0;
      border: none;
    }

    :root {
      --primary-color: #2563eb;
      --primary-hover: #1d4ed8;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --border-color: #cbd5e1;
      --bg-light: #f9fafb;
      --bg-body: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --bg-card: #ffffff;
      --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --radius-lg: 0.75rem;
      --radius-xl: 1rem;
    }

    [data-theme="dark"] {
      --primary-color: #60a5fa;
      --primary-hover: #93c5fd;
      --text-primary: #f3f4f6;
      --text-secondary: #9ca3af;
      --border-color: #374151;
      --bg-light: #1f2937;
      --bg-body: linear-gradient(135deg, #4c1d95 0%, #1e3a8a 100%);
      --bg-card: #111827;
      --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
    }

    /* Override body styles with our custom design */
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: var(--text-primary);
      line-height: 1.7;
      font-size: 16px;
      background: var(--bg-body);
      background-attachment: fixed;
      min-height: 100vh;
      padding-bottom: 2rem;
      transition: background 0.3s ease, color 0.3s ease;
    }

    h3 {
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 2rem;
      font-size: 1.875rem;
      transition: color 0.3s ease;
    }

    /* Override link styles with our design */
    a {
      color: var(--primary-color);
      transition: color 0.2s ease;
    }

    a:hover {
      color: var(--primary-hover);
    }

    header {
      background: transparent;
      padding: 1rem 0;
      margin-bottom: 0;
    }

    header .container {
      max-width: 960px;
    }

    .navbar-brand {
      display: inline-block;
      padding-top: 0.3125rem;
      padding-bottom: 0.3125rem;
      margin-right: 1rem;
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: -0.025em;
      line-height: inherit;
      white-space: nowrap;
      text-decoration: none;
    }

    .navbar-brand:hover {
      text-decoration: none;
    }

    .container.boxed {
      max-width: 960px;
      padding: 3rem 2rem;
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      margin-bottom: 2rem;
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }

    .profile-section {
      margin-bottom: 3rem;
    }

    .profile-img-container {
      position: relative;
      width: 100%;
      max-width: 280px;
      aspect-ratio: 3/4;
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
    }

    .profile-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity 0.3s ease;
      opacity: 1;
    }

    .profile-img.fade-out {
      opacity: 0;
    }

    .profile-img.fade-in {
      opacity: 1;
    }

    #profileImgBottom {
      opacity: 0;
      visibility: hidden;
    }

    .bio-text {
      font-size: 1.0625rem;
      line-height: 1.75;
      color: var(--text-primary);
    }

    .bio-text p {
      margin-bottom: 1.25rem;
    }

    .contact-info {
      display: inline-flex;
      align-items: center;
      padding: 0.75rem 1.5rem;
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      font-size: 1.0625rem;
      transition: all 0.2s ease, background 0.3s ease, border-color 0.3s ease;
      margin-bottom: 3rem;
    }

    .contact-info:hover {
      background: var(--bg-card);
      box-shadow: var(--shadow-sm);
      transform: translateY(-1px);
    }

    .social-links {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }

    .social-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      font-size: 0.9375rem;
      transition: all 0.2s ease, background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
      color: var(--text-secondary);
    }

    .social-link:hover {
      background: var(--bg-light);
      border-color: var(--primary-color);
      color: var(--primary-color);
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    .award-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
      font-size: 0.8125rem;
      font-weight: 600;
      border-radius: 0.375rem;
      margin-left: 0.5rem;
      vertical-align: middle;
    }

    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 3rem;
      height: 3rem;
      background: var(--bg-card);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-lg);
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .back-to-top:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-4px);
    }

    .back-to-top::before {
      content: "‚Üë";
      font-size: 1.5rem;
      font-weight: 600;
    }

    /* Theme toggle */
    .theme-toggle {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 1.25rem;
      color: white;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .filter-container {
      margin-bottom: 2rem;
    }

    .filter-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .filter-btn {
      padding: 0.5rem 1rem;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      font-size: 0.9375rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease, background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
      color: var(--text-secondary);
    }

    .filter-btn:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    .filter-btn.active {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
    }

    .filter-btn .count {
      display: none;
    }

    .publication-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .tag {
      display: inline-block;
      padding: 0.25rem 0.625rem;
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: 0.375rem;
      font-size: 0.8125rem;
      color: var(--text-secondary);
      font-weight: 500;
      transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    }

    .card.hidden {
      display: none;
    }

    .card.fade-out {
      opacity: 0;
      transform: scale(0.95);
    }

    .card.fade-in {
      animation: fadeInUp 0.4s ease forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .no-results {
      text-align: center;
      padding: 3rem 2rem;
      color: var(--text-secondary);
      display: none;
    }

    .no-results.visible {
      display: block;
    }

    /* Skeleton loading styles */
    .skeleton {
      background: var(--bg-light);
      position: relative;
      overflow: hidden;
    }

    .skeleton::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.2) 20%,
        rgba(255, 255, 255, 0.5) 50%,
        rgba(255, 255, 255, 0.2) 80%,
        rgba(255, 255, 255, 0) 100%
      );
      animation: shimmer 1.5s infinite;
      transform: translateX(-100%);
    }

    [data-theme="dark"] .skeleton::after {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.05) 20%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.05) 80%,
        rgba(255, 255, 255, 0) 100%
      );
    }

    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(100%);
      }
    }

    .ratio {
      position: relative;
    }

    .ratio .skeleton-loader {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-light);
      z-index: 1;
      overflow: hidden;
    }

    .ratio .skeleton-loader::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.2) 20%,
        rgba(255, 255, 255, 0.5) 50%,
        rgba(255, 255, 255, 0.2) 80%,
        rgba(255, 255, 255, 0) 100%
      );
      animation: shimmer 1.5s infinite;
      transform: translateX(-100%);
    }

    [data-theme="dark"] .ratio .skeleton-loader::after {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.05) 20%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.05) 80%,
        rgba(255, 255, 255, 0) 100%
      );
    }

    .ratio .skeleton-loader.loaded {
      display: none;
    }

    .ratio iframe[data-src] {
      background: transparent;
    }

    .ratio.skeleton {
      background: var(--bg-light);
    }

    .ratio.skeleton::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.2) 20%,
        rgba(255, 255, 255, 0.5) 50%,
        rgba(255, 255, 255, 0.2) 80%,
        rgba(255, 255, 255, 0) 100%
      );
      animation: shimmer 1.5s infinite;
      transform: translateX(-100%);
      z-index: 1;
    }

    [data-theme="dark"] .ratio.skeleton::before {
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.05) 20%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.05) 80%,
        rgba(255, 255, 255, 0) 100%
      );
    }

    img.skeleton {
      opacity: 0;
    }

    img.loaded {
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    iframe.skeleton {
      opacity: 0;
    }

    iframe.loaded {
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    /* Filtering animations */
    .card.fade-out,
    .card.fade-in {
      transition: opacity 0.2s ease-out, transform 0.2s ease-out;
    }

    .publications-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
      margin-top: 2rem;
    }

    .card {
      border: 1px solid var(--border-color);
      padding: 0;
      border-radius: var(--radius-xl);
      background: var(--bg-card);
      box-shadow: var(--shadow-sm);
      overflow: hidden;
      transition: all 0.3s ease, background 0.3s ease, border-color 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-4px);
      border-color: #d1d5db;
    }

    .card-body {
      padding: 1.5rem;
      flex-grow: 1;
    }

    .card-title {
      font-size: 1.125rem;
      font-weight: 600;
      line-height: 1.4;
      margin-bottom: 0.75rem;
    }

    .card-title a {
      color: var(--text-primary);
      transition: color 0.2s ease;
    }

    .card-title a:hover {
      color: var(--primary-color);
    }

    .card-text {
      font-size: 0.9375rem;
      line-height: 1.5;
      color: var(--text-secondary);
    }

    .card-text em {
      color: var(--primary-color);
      font-weight: 500;
      font-style: normal;
    }

    .ratio {
      position: relative;
      width: 100%;
      background: var(--bg-light);
    }

    .ratio-16x9 {
      padding-top: 56.25%;
    }

    .ratio img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .ratio iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    footer {
      padding: 2rem 0;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
      color: white;
      font-size: 0.9375rem;
    }

    footer a {
      color: white;
    }

    footer a:hover {
      color: rgba(255, 255, 255, 0.8);
    }

    @media (max-width: 768px) {
      .publications-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      header {
        padding: 0.75rem 0;
        margin-bottom: 0.5rem;
      }

      .container.boxed {
        max-width: 100%;
        margin: 1rem;
        padding: 2rem 1.25rem;
        border-radius: 0.5rem;
      }

      .profile-img-container {
        max-width: 200px;
        margin: 0 auto 1.5rem;
      }

      h3 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .bio-text {
        font-size: 1rem;
      }

      .back-to-top {
        bottom: 1rem;
        right: 1rem;
        width: 2.5rem;
        height: 2.5rem;
      }

      .social-links {
        justify-content: center;
      }

      .award-badge {
        display: block;
        margin-left: 0;
        margin-top: 0.5rem;
        text-align: center;
        width: fit-content;
      }
    }
  </style>

</head>

<body>
  <header>
    <div class="container">
      <nav class="navbar custom-nav" role="navigation">
        <div class="navbar-header">
          <a class="navbar-brand" href="#" style="color: white;">Kevin Blackburn-Matzen</a>
        </div>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
          <span id="themeIcon">üåô</span>
        </button>
      </nav>
    </div>
  </header>
  <div class="container boxed">

    <div class="row profile-section">
      <div class="col-md-4">
        <div class="profile-img-container">
          <img src="images/daytime.jpg" class="profile-img" id="profileImgBottom" alt="Kevin Blackburn-Matzen" />
          <img src="images/daytime.jpg" class="profile-img" id="profileImgTop" alt="Kevin Blackburn-Matzen" />
        </div>
      </div>
      <div class="col-md-8 bio-text">
        <p>
          I'm a Senior Research Scientist/Engineer at <strong>Adobe</strong> in Seattle, specializing in <strong>controllable 
          image and video generation</strong> with a focus on 3D-centric controls. My research bridges computer vision, 
          machine learning, and computational photography to build systems that give creators precise control over visual content.
        </p>
        <p>
          My work spans <strong>3D vision</strong> (stereo, depth estimation, camera calibration), <strong>computational 
          photography</strong> (burst processing, reflection removal, defocus synthesis), and <strong>video processing</strong> 
          (view synthesis, depth estimation, scene-aware effects). I'm particularly interested in how 3D understanding can 
          improve generative models and creative tools.
        </p>
        <p>
          I earned my PhD from <a href="http://www.cs.cornell.edu/">Cornell University</a> (2016) under 
          <a href="http://www.cs.cornell.edu/~snavely/">Noah Snavely</a> and
          <a href="http://www.cs.cornell.edu/~kb/">Kavita Bala</a>, where I developed methods for analyzing large-scale 
          photo collections. Before joining Adobe, I spent five years at Facebook (2016-2021) 
          on Computational Photography and XR Tech.
        </p>
        <p style="font-size: 0.9375rem; color: var(--text-secondary);">
          <em>Note: Publications prior to 2021 are under the name Kevin Matzen.</em>
        </p>
        <div>
          <a href="mailto:kmatzen@gmail.com" class="contact-info">kmatzen@gmail.com</a>
        </div>
        <div class="social-links">
          <a href="https://scholar.google.com/citations?user=EmzqgcMAAAAJ&hl=en" class="social-link" target="_blank">
            <span>üìö</span> Google Scholar
          </a>
          <a href="https://github.com/kmatzen" class="social-link" target="_blank">
            <span>üíª</span> GitHub
          </a>
          <a href="https://www.linkedin.com/in/kevin-blackburn-matzen-b3714414" class="social-link" target="_blank">
            <span>üíº</span> LinkedIn
          </a>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <h3>Publications</h3>

        <div class="filter-container">
          <div class="filter-buttons" id="filterButtons">
            <button class="filter-btn active" data-filter="all">All <span class="count"></span></button>
            <button class="filter-btn" data-filter="3d-vision">3D Vision <span class="count"></span></button>
            <button class="filter-btn" data-filter="computational-photography">Computational Photography <span class="count"></span></button>
            <button class="filter-btn" data-filter="generative-ai">Generative AI <span class="count"></span></button>
            <button class="filter-btn" data-filter="video">Video Processing <span class="count"></span></button>
            <button class="filter-btn" data-filter="depth">Depth Estimation <span class="count"></span></button>
            <button class="filter-btn" data-filter="detection">Detection <span class="count"></span></button>
            <button class="filter-btn" data-filter="trend-analysis">Trend Analysis <span class="count"></span></button>
            <button class="filter-btn" data-filter="robotics">Robotics <span class="count"></span></button>
          </div>
        </div>

        <div class="publications-grid" id="publicationsGrid">
          <div class="card" data-tags="generative-ai">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://oindrilasaha.github.io/SIGMA-Gen/"
                  target="_blank">
                  <strong>SIGMA-GEN: Structure and Identity Guided Multi-subject Assembly for Image Generation</strong>
                </a>
              </h5>
              <div class="card-text">O. Saha, V. Krs, R. Mech, S. Maji, <b>K Blackburn-Matzen</b>, M. Gadelha</div>
              <div class="card-text"><em>arXiv preprint 2025</em></div>
              <div class="publication-tags">
                <span class="tag">Generative AI</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/teaser_refined.jpg" loading="lazy" alt="SIGMA-Gen Visualization">
            </div>
          </div>

          <div class="card" data-tags="computational-photography">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://erickee.com/reflections/cvpr2025.html"
                  target="_blank">
                  <strong>Removing Reflections from RAW Photos</strong>
                </a>
              </h5>
              <div class="card-text">E Kee, A Pikielny, <b>K Blackburn‚ÄëMatzen</b>, M Levoy</div>
              <div class="card-text"><em>CVPR 2025</em></div>
              <div class="publication-tags">
                <span class="tag">Computational Photography</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/XNmyUGD8PVA" title="Removing Reflections from RAW Photos"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="video,3d-vision">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://casual-fvs.github.io/" target="_blank">
                  <strong>Fast View Synthesis of Casual Videos with Soup-of-Planes</strong>
                </a>
              </h5>
              <div class="card-text">YC Lee, Z Zhang, <b>K Blackburn-Matzen</b>, S Niklaus, J Zhang, JB
                Huang, F Liu</div>
              <div class="card-text"><em>ECCV 2024</em></div>
              <div class="publication-tags">
                <span class="tag">Video Processing</span>
                <span class="tag">3D Vision</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/e4LrUpUBsMA" title="Soup-of-Planes" allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="video,3d-vision">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://em-yu.github.io/research/videodoodles/" target="_blank">
                  <strong>VideoDoodles: Hand-Drawn Animations on Videos with Scene-Aware Canvases</strong>
                </a>
              </h5>
              <div class="card-text">E Yu, <b>K Blackburn-Matzen</b>, C Nguyen, O Wang, RH Kazi, A
                Bousseau
              </div>
              <div class="card-text"><em>SIGGRAPH 2023</em></div>
              <div class="publication-tags">
                <span class="tag">Video Processing</span>
                <span class="tag">3D Vision</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/rN3o8kwX9-8" title="VideoDoodles" allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="3d-vision">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://jinlinyi.github.io/PerspectiveFields/" target="_blank">
                  <strong>Perspective Fields for Single Image Camera Calibration</strong>
                </a>
              </h5>
              <div class="card-text">L Jin, J Zhang, Y Hold-Geoffroy, O Wang, <b>K Matzen</b>, M
                Sticha, DF
                Fouhey</div>
              <div class="card-text"><em>CVPR 2023</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/sN5B_ZvMva8" title="Perspective Fields"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="depth,3d-vision">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://arxiv.org/abs/2211.10551" target="_blank">
                  <strong>A Practical Stereo Depth System for Smart Glasses</strong>
                </a>
              </h5>
              <div class="card-text">J Wang, D Scharstein, A Bapat, <b>K Blackburn-Matzen</b>, M Yu, J
                Lehman, S Alsisan, Y Wang, S Tsai, JM Frahm, Z He, P Vajda, MF Cohen, M Uyttendaele</div>
              <div class="card-text"><em>CVPR 2023</em></div>
              <div class="publication-tags">
                <span class="tag">Depth Estimation</span>
                <span class="tag">3D Vision</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/jRh2qlclJ8w" title="Stereo Depth System"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="3d-vision,computational-photography,depth">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://facebookresearch.github.io/one_shot_3d_photography/" target="_blank">
                  <strong>One Shot 3D Photography</strong>
                </a>
              </h5>
              <div class="card-text">
                J Kopf, <b>K Matzen</b>, S Alsisan, O Quigley, F Ge, Y Chong, J Patterson, JM Frahm, S Wu, M Yu, P
                Zhang, Z
                He,
                P Vajda, A Saraf, M Cohen
              </div>
              <div class="card-text"><em>SIGGRAPH 2020</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
                <span class="tag">Computational Photography</span>
                <span class="tag">Depth Estimation</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/dR_NGkHS7rU" title="One Shot 3D Photography"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="depth,video,3d-vision">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://roxanneluo.github.io/Consistent-Video-Depth-Estimation/" target="_blank">
                  <strong>Consistent Video Depth Estimation</strong>
                </a>
              </h5>
              <div class="card-text">
                X Luo, JB Huang, R Szeliski, <b>K Matzen</b>, J Kopf
              </div>
              <div class="card-text"><em>SIGGRAPH 2020</em></div>
              <div class="publication-tags">
                <span class="tag">Depth Estimation</span>
                <span class="tag">Video Processing</span>
                <span class="tag">3D Vision</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/5Tia2oblJAg" title="Consistent Video Depth Estimation"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="3d-vision,depth">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://ieeexplore.ieee.org/document/9156343" target="_blank">
                  <strong>VPLNet: Deep Single View Normal Estimation With Vanishing Points and Lines</strong>
                </a>
              </h5>
              <div class="card-text">
                R Wang, D Geraghty, <b>K Matzen</b>, R Szeliski, JM Frahm
              </div>
              <div class="card-text"><em>CVPR 2020</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
                <span class="tag">Depth Estimation</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/fQx-0ywtzsE" title="VPLNet" allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="trend-analysis,detection">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://geostyle.cs.cornell.edu/" target="_blank">
                  <strong>GeoStyle: Discovering Fashion Trends and Events</strong>
                </a>
              </h5>
              <div class="card-text">
                U Mall, <b>K Matzen</b>, B Hariharan, K Bala, N Snavely
              </div>
              <div class="card-text"><em>ICCV 2019</em></div>
              <div class="publication-tags">
                <span class="tag">Trend Analysis</span>
                <span class="tag">Detection</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/geostyle.jpg" loading="lazy" alt="GeoStyle Visualization">
            </div>
          </div>

          <div class="card" data-tags="video,computational-photography,depth">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://ceciliavision.github.io/vid-auto-focus/" target="_blank">
                  <strong>Synthetic Defocus and Look-Ahead Autofocus for Casual Videography</strong>
                </a>
              </h5>
              <div class="card-text">
                X Zhang, <b>K Matzen</b>, V Nguyen, D Yao, Y Zhang, R Ng
              </div>
              <div class="card-text"><em>SIGGRAPH 2019</em></div>
              <div class="publication-tags">
                <span class="tag">Video Processing</span>
                <span class="tag">Computational Photography</span>
                <span class="tag">Depth Estimation</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://www.youtube.com/embed/5XM_rw0HnAc" title="Synthetic Defocus"
                allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="computational-photography">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://openaccess.thecvf.com/content_ECCV_2018/papers/Clement_Godard_Deep_Burst_Denoising_ECCV_2018_paper.pdf"
                  target="_blank">
                  <strong>Deep Burst Denoising</strong>
                </a>
              </h5>
              <div class="card-text">
                C Godard, <b>K Matzen</b>, M Uyttendaele
              </div>
              <div class="card-text"><em>ECCV 2018</em></div>
              <div class="publication-tags">
                <span class="tag">Computational Photography</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/burst.jpg" loading="lazy" alt="Deep Burst Denoising">
            </div>
          </div>

          <div class="card" data-tags="3d-vision,depth">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://phuang17.github.io/DeepMVS/index.html" target="_blank">
                  <strong>DeepMVS: Learning Multi-view Stereopsis</strong>
                </a>
              </h5>
              <div class="card-text">
                PH Huang, <b>K Matzen</b>, J Kopf, N Ahuja, JB Huang
              </div>
              <div class="card-text"><em>CVPR 2018</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
                <span class="tag">Depth Estimation</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="https://phuang17.github.io/DeepMVS/img/overview.png" loading="lazy" alt="DeepMVS pipeline">
            </div>
          </div>

          <div class="card" data-tags="3d-vision,computational-photography">
            <div class="card-body">
              <h5 class="card-title">
                <a href="https://dl.acm.org/doi/10.1145/3072959.3073645" target="_blank">
                  <strong>Low-cost 360 stereo photography and video capture</strong>
                </a>
              </h5>
              <div class="card-text">
                <b>K Matzen</b>, MF Cohen, B Evans, J Kopf, R Szeliski
              </div>
              <div class="card-text"><em>SIGGRAPH 2017</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
                <span class="tag">Computational Photography</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/stereo.jpg" loading="lazy" alt="Low-cost 360 stereo photography and video capture">
            </div>
          </div>

          <div class="card" data-tags="trend-analysis,detection">
            <div class="card-body">
              <h5 class="card-title">
                <a href="http://streetstyle.cs.cornell.edu/" target="_blank">
                  <strong>StreetStyle: Exploring world-wide clothing styles from millions of photos</strong>
                </a>
              </h5>
              <div class="card-text">
                <b>K Matzen</b>, K Bala, N Snavely
              </div>
              <div class="card-text"><em>arXiv preprint 2017</em></div>
              <div class="publication-tags">
                <span class="tag">Trend Analysis</span>
                <span class="tag">Detection</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/streetstyle_small.jpg" loading="lazy" alt="StreetStyle visual map">
            </div>
          </div>

          <div class="card" data-tags="detection,robotics">
            <div class="card-body">
              <h5 class="card-title">
                <a href="http://arxiv.org/abs/1605.02196" target="_blank">
                  <strong>All Weather Perception: Joint Data Association, Tracking, and Classification for Autonomous
                    Ground Vehicles</strong>
                </a>
              </h5>
              <div class="card-text">
                P Radecki, M Campbell, <b>K Matzen</b>
              </div>
              <div class="card-text"><em>arXiv preprint 2016</em></div>
              <div class="publication-tags">
                <span class="tag">Detection</span>
                <span class="tag">Robotics</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/skynet.jpg" loading="lazy" alt="All Weather Perception: Joint Data Association, Tracking, and Classification for Autonomous Ground Vehicles">
            </div>
          </div>

          <div class="card" data-tags="detection">
            <div class="card-body">
              <h5 class="card-title">
                <a href="http://www.cs.cornell.edu/projects/bubblenet/" target="_blank">
                  <strong>BubbLeNet: Foveated Imaging for Visual Discovery</strong>
                </a>
              </h5>
              <div class="card-text"><b>K Matzen</b>, N Snavely</div>
              <div class="card-text"><em>ICCV 2015</em></div>
              <div class="publication-tags">
                <span class="tag">Detection</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <img src="/images/bubblenet_small.jpg" loading="lazy" alt="BubbLeNet image">
            </div>
          </div>

          <div class="card" data-tags="trend-analysis,3d-vision">
            <div class="card-body">
              <h5 class="card-title">
                <a href="http://www.cs.cornell.edu/projects/chronology/" target="_blank">
                  <strong>Scene Chronology</strong>
                </a>
                <span class="award-badge">üèÜ Best Paper</span>
              </h5>
              <div class="card-text"><b>K Matzen</b>, N Snavely</div>
              <div class="card-text"><em>ECCV 2014</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
                <span class="tag">Trend Analysis</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://player.vimeo.com/video/105768016" title="Scene Chronology" allowfullscreen></iframe>
            </div>
          </div>

          <div class="card" data-tags="3d-vision,detection">
            <div class="card-body">
              <h5 class="card-title">
                <a href="http://nyc3d.cs.cornell.edu/" target="_blank">
                  <strong>NYC3DCars: A Dataset of 3D Vehicles in Geographic Context</strong>
                </a>
              </h5>
              <div class="card-text"><b>K Matzen</b>, N Snavely</div>
              <div class="card-text"><em>ICCV 2013</em></div>
              <div class="publication-tags">
                <span class="tag">3D Vision</span>
                <span class="tag">Detection</span>
              </div>
            </div>
            <div class="ratio ratio-16x9">
              <iframe data-src="https://player.vimeo.com/video/76784236" title="NYC3DCars" allowfullscreen></iframe>
            </div>
          </div>
        </div>

        <div class="no-results" id="noResults">
          <p>No publications found matching the selected filter.</p>
        </div>

      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2014-25 Kevin Blackburn-Matzen</p>
  </footer>

  <button class="back-to-top" id="backToTop" aria-label="Back to top"></button>

  <script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const html = document.documentElement;
    
    // Preload both profile images for seamless transitions
    const daytimeImg = new Image();
    const nightImg = new Image();
    daytimeImg.src = 'images/daytime.jpg';
    nightImg.src = 'images/night.jpg';
    
    // Track if a transition is in progress
    let isTransitioning = false;
    
    // Check for saved theme preference or use system preference
    function getPreferredTheme() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        return savedTheme;
      }
      // Check system preference
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    
    function setTheme(theme, skipTransition = false) {
      // Prevent overlapping transitions
      if (isTransitioning && !skipTransition) {
        return;
      }
      
      html.setAttribute('data-theme', theme);
      themeIcon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
      
      // Switch profile image based on theme with smooth crossfade
      const profileImgTop = document.getElementById('profileImgTop');
      const profileImgBottom = document.getElementById('profileImgBottom');
      
      if (profileImgTop && profileImgBottom) {
        const newSrc = theme === 'dark' ? 'images/night.jpg' : 'images/daytime.jpg';
        
        // Only change if the source is different
        if (profileImgTop.src.indexOf(newSrc) === -1) {
          if (skipTransition) {
            // No transition on initial load
            profileImgTop.src = newSrc;
            profileImgBottom.src = newSrc;
            profileImgTop.style.opacity = '1';
            profileImgBottom.style.opacity = '0';
            profileImgBottom.style.visibility = 'hidden';
          } else {
            // Mark transition as in progress
            isTransitioning = true;
            
            // Ensure the new image is fully loaded before starting crossfade
            const tempImg = new Image();
            tempImg.onload = () => {
              // Set the bottom image to the new source and ensure it starts at opacity 0
              profileImgBottom.src = newSrc;
              profileImgBottom.style.opacity = '0';
              profileImgBottom.style.visibility = 'visible';
              
              // Force a reflow to ensure the image is rendered
              void profileImgBottom.offsetWidth;
              
              // Use double requestAnimationFrame to ensure both transitions start together
              requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                  // Simultaneously: fade out top image AND fade in bottom image
                  profileImgTop.style.opacity = '0';
                  profileImgBottom.style.opacity = '1';
                });
              });
              
              // After transition completes, swap them back WITHOUT triggering another transition
              setTimeout(() => {
                // Temporarily disable transitions
                profileImgTop.style.transition = 'none';
                profileImgBottom.style.transition = 'none';
                
                // Update sources and opacity
                profileImgTop.src = newSrc;
                profileImgTop.style.opacity = '1';
                profileImgBottom.style.opacity = '0';
                profileImgBottom.style.visibility = 'hidden';
                
                // Force reflow
                void profileImgTop.offsetWidth;
                
                // Re-enable transitions
                profileImgTop.style.transition = '';
                profileImgBottom.style.transition = '';
                
                // Mark transition as complete
                isTransitioning = false;
              }, 350);
            };
            tempImg.src = newSrc;
          }
        }
      }
    }
    
    // Initialize theme without transition
    const initialTheme = getPreferredTheme();
    setTheme(initialTheme, true);
    
    // Listen for system theme changes (if user hasn't manually set a preference)
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        setTheme(e.matches ? 'dark' : 'light');
      }
    });
    
    // Handle manual toggle
    themeToggle.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      setTheme(newTheme);
      localStorage.setItem('theme', newTheme);
    });

    // Back to top functionality
    const backToTopButton = document.getElementById('backToTop');
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTopButton.classList.add('visible');
      } else {
        backToTopButton.classList.remove('visible');
      }
    });
    
    backToTopButton.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Publication filtering functionality
    const filterButtons = document.querySelectorAll('.filter-btn');
    const publicationCards = document.querySelectorAll('.card[data-tags]');
    const noResults = document.getElementById('noResults');
    
    // Count publications for each filter
    function updateCounts() {
      filterButtons.forEach(btn => {
        const filter = btn.getAttribute('data-filter');
        let count = 0;
        
        if (filter === 'all') {
          count = publicationCards.length;
        } else {
          publicationCards.forEach(card => {
            const tags = card.getAttribute('data-tags').split(',');
            if (tags.includes(filter)) {
              count++;
            }
          });
        }
        
        btn.querySelector('.count').textContent = `(${count})`;
      });
    }
    
    // Filter publications
    function filterPublications(selectedFilter) {
      let visibleCount = 0;
      let delay = 0;
      
      publicationCards.forEach((card) => {
        const tags = card.getAttribute('data-tags').split(',');
        const shouldShow = selectedFilter === 'all' || tags.includes(selectedFilter);
        
        if (shouldShow) {
          // Show card with animation if hidden
          if (card.classList.contains('hidden')) {
            card.classList.remove('hidden');
            
            // Stagger the fade-in animation
            setTimeout(() => {
              card.classList.add('fade-in');
            }, delay);
            
            // Remove fade-in class after animation completes
            setTimeout(() => {
              card.classList.remove('fade-in');
            }, delay + 400);
            
            delay += 30; // 30ms stagger between each card
          }
          visibleCount++;
        } else {
          // Add fade-out effect before hiding
          if (!card.classList.contains('hidden')) {
            card.classList.add('fade-out');
            setTimeout(() => {
              card.classList.add('hidden');
              card.classList.remove('fade-out');
            }, 200);
          }
        }
      });
      
      // Show/hide no results message
      if (visibleCount === 0) {
        noResults.classList.add('visible');
      } else {
        noResults.classList.remove('visible');
      }
    }
    
    // Handle filter button clicks
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active class from all buttons
        filterButtons.forEach(b => b.classList.remove('active'));
        
        // Add active class to clicked button
        btn.classList.add('active');
        
        // Filter publications
        const selectedFilter = btn.getAttribute('data-filter');
        filterPublications(selectedFilter);
      });
    });
    
    // Initialize counts on page load
    updateCounts();

    // Lazy load iframes
    const lazyIframes = document.querySelectorAll('iframe[data-src]');
    
    // Add skeleton loaders to all iframes
    lazyIframes.forEach(iframe => {
      const wrapper = iframe.closest('.ratio');
      if (wrapper && !wrapper.querySelector('.skeleton-loader')) {
        const skeleton = document.createElement('div');
        skeleton.className = 'skeleton-loader';
        wrapper.appendChild(skeleton);
      }
      iframe.classList.add('skeleton');
    });

    if ('IntersectionObserver' in window) {
      const iframeObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const iframe = entry.target;
            iframe.src = iframe.dataset.src;
            iframe.removeAttribute('data-src');
            
            // Remove skeleton when iframe loads
            iframe.addEventListener('load', () => {
              iframe.classList.remove('skeleton');
              iframe.classList.add('loaded');
              const wrapper = iframe.closest('.ratio');
              const skeleton = wrapper?.querySelector('.skeleton-loader');
              if (skeleton) {
                skeleton.classList.add('loaded');
              }
            });
            
            observer.unobserve(iframe);
          }
        });
      }, {
        rootMargin: '50px' // Start loading 50px before iframe comes into view
      });
      
      lazyIframes.forEach(iframe => {
        iframeObserver.observe(iframe);
      });
    } else {
      // Fallback for browsers without IntersectionObserver
      lazyIframes.forEach(iframe => {
        iframe.src = iframe.dataset.src;
        iframe.addEventListener('load', () => {
          iframe.classList.remove('skeleton');
          iframe.classList.add('loaded');
          const wrapper = iframe.closest('.ratio');
          const skeleton = wrapper?.querySelector('.skeleton-loader');
          if (skeleton) {
            skeleton.classList.add('loaded');
          }
        });
      });
    }

    // Add skeleton loading for images
    const lazyImages = document.querySelectorAll('img[loading="lazy"]');
    
    lazyImages.forEach(img => {
      const wrapper = img.closest('.ratio');
      
      // Add skeleton class initially
      if (!img.complete) {
        img.classList.add('skeleton');
        if (wrapper) wrapper.classList.add('skeleton');
      } else {
        img.classList.add('loaded');
      }
      
      // Remove skeleton when image loads
      img.addEventListener('load', () => {
        img.classList.remove('skeleton');
        img.classList.add('loaded');
        if (wrapper) wrapper.classList.remove('skeleton');
      });
      
      // Handle error case
      img.addEventListener('error', () => {
        img.classList.remove('skeleton');
        if (wrapper) wrapper.classList.remove('skeleton');
      });
    });

  </script>
</body>

</html>